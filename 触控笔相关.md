

# 触控笔

学习机一般都是Android系统，都是支持手指的触摸屏。由于手指太粗，书写效果一般，一般学习机都会有配套的定制笔。市场上笔的种类很多，学习机上，一般分为2种：一种类手指的笔，一种驱动定制协议的笔。从笔的技术实现角度上也分电容笔和电磁笔，墨水屏一般都是配置电磁笔。当然第二种精度、延迟低，书写体验好，都是厂家定制的笔。


## 笔的常见case

- 断触
- 偏移大
- 报点异常，如少、多、乱报或不报
- 电磁干扰
- 丢笔画，无法写小字
- 延迟高
- 系统报点、Android报点、h5监听报点的差异性。
- 测量延迟的工具和流程
- 橡皮擦监听
- 笔头粗
- 换醒延迟高或异常
- 点击或滑动无响应，拖动问题
- 电池情况
- 压感

以上关键点，有些是硬件问题，有些是系统驱动、软件适配问题。要诊断问题，需要对比或视频看现象来下结论。

## 学习机上关于笔的功能实现

- 系统层适配驱动，完成笔的配对、精度、报点等工作。物理橡皮擦要单独给事件。
- 软件层适配功能，监听笔的触发事件
- 软件层分Android层和h5层。Android层识别笔点击过屏幕，可以全局保存，供其他Android应用和h5层使用。
- 在学习机上，不管是Android层还是h5层的画板，都需要区分笔写、手写、键盘书写模式。方便用户自由选择。也方便定制特殊的业务功能。


## h5事件监听的参考文献：

- [https://developer.mozilla.org/zh-CN/docs/Web/API/Pointer_events](https://developer.mozilla.org/zh-CN/docs/Web/API/Pointer_events)

- [pointerType (en-US)](https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/pointerType) - 表明引发该事件的设备类型（鼠标/笔/触摸等）

